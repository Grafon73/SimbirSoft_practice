databaseChangeLog:
  - changeSet:
      id:  createTables
      author:  Grafon73
      changes:
        -  createTable:
             tableName:  users
             columns:
               -  column:
                    name:  username
                    type:  varchar(50)
                    constraints:
                      primaryKey:  true
                      nullable: false
               - column:
                   name:  password
                   type:  varchar(100)
                   constraints:
                     nullable: false
               - column:
                   name:  enabled
                   type:  tinyint
                   constraints:
                     nullable: false

        - createTable:
            tableName:   authorities
            columns:
              - column:
                  name:  username
                  type:  varchar(50)
                  constraints:
                    nullable: false
                    foreignKeyName: authorities_username
                    references: users(username)
              - column:
                  name:  authority
                  type:  varchar(50)
                  constraints:
                    nullable: false

        - createTable:
            tableName:   genre
            columns:
              - column:
                  name:  genre_id
                  type:  int
                  autoIncrement:  true
                  constraints:
                    nullable: false
                    primaryKey:  true
              - column:
                  name:  version
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  genre_name
                  type:  varchar(50)
                  constraints:
                    nullable: false
              - column:
                  name:  create_date
                  type:  timestamp with time zone
                  constraints:
                    nullable: false
              - column:
                  name:  update_date
                  type:  timestamp with time zone

        - createTable:
            tableName:   author
            columns:
              - column:
                  name:  author_id
                  type:  int
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true

              - column:
                  name:  version
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  first_name
                  type:  varchar(50)
                  constraints:
                    nullable: false
              - column:
                  name:  last_name
                  type:  varchar(50)
                  constraints:
                    nullable: false
              - column:
                  name:  middle_name
                  type:  varchar(50)
              - column:
                  name:  birth_date
                  type:  date
              - column:
                  name:  create_date
                  type:  timestamp with time zone
                  constraints:
                    nullable: false
              - column:
                  name:  update_date
                  type:  timestamp with time zone

        - createTable:
            tableName:   person
            columns:
              - column:
                  name:  person_id
                  type:  int
                  autoIncrement:  true
                  constraints:
                    nullable: false
                    primaryKey:  true
              - column:
                  name:  version
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  first_name
                  type:  varchar(50)
                  constraints:
                    nullable: false
              - column:
                  name:  last_name
                  type:  varchar(50)
                  constraints:
                    nullable: false
              - column:
                  name:  middle_name
                  type:  varchar(50)
              - column:
                  name:  birth_date
                  type:  date
              - column:
                  name:  create_date
                  type:  timestamp with time zone
                  constraints:
                    nullable: false
              - column:
                  name:  update_date
                  type:  timestamp with time zone
              - column:
                  name:  username
                  type:  varchar(50)
                  constraints:
                    foreignKeyName: users_username
                    references: users(username)

        - createTable:
            tableName:   book
            columns:
              - column:
                  name:  book_id
                  type:  int
                  autoIncrement:  true
                  constraints:
                    nullable: false
                    primaryKey:  true
              - column:
                  name:  version
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  name
                  type:  varchar(50)
              - column:
                  name:  author_id
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  admission_date
                  type:  date
              - column:
                  name:  publication_date
                  type:  date
              - column:
                  name:  create_date
                  type:  timestamp with time zone
                  constraints:
                    nullable: false
              - column:
                  name:  update_date
                  type:  timestamp with time zone

        - createTable:
            tableName:   book_genre
            columns:
              - column:
                  name:  book_id
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  genre_id
                  type:  int
                  constraints:
                    nullable: false

        - createTable:
            tableName:   library_card
            columns:
              - column:
                  name:  card_id
                  type:  int
                  autoIncrement:  true
                  constraints:
                    nullable: false
                    primaryKey:  true
              - column:
                  name:  version
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  book_book_id
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  person_person_id
                  type:  int
                  constraints:
                    nullable: false
              - column:
                  name:  create_date
                  type:  timestamp with time zone
                  constraints:
                    nullable: false
              - column:
                  name:  update_date
                  type:  timestamp with time zone
              - column:
                  name:  return_date
                  type:  timestamp with time zone
                  constraints:
                    nullable: false
              - column:
                  name:  in_library
                  type:  boolean
        -  createIndex:
             tableName: authorities
             indexName: ux_auth_username
             columns:
               -  column:
                    name:  username
               - column:
                   name:  authority
             unique:  true
  - changeSet:
      id:  addData
      author:  Grafon73
      changes:
        - sqlFile:
            dbms: h2
            encoding: UTF-8
            path: data.sql